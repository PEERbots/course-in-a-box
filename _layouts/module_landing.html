---
layout: base
---
{% assign path_parts = page.url | split: '/' %}
{% assign course_id = path_parts[2] %}
{% assign module_id = path_parts[3] %}

{% assign active_course = null %}
{% for course in site.data.courses.courses %}
{% if course.id == course_id %}
{% assign active_course = course %}
{% endif %}
{% endfor %}


<div class="container py-5">
    <div class="row">
        <div class="col-lg-8 offset-lg-2">
            {% if active_course.status == "published" %}
            <div class="content mb-5">
                {{ content }}
            </div>

            <h2 class="mb-4">Module Content</h2>

            {% comment %}
            We want to find all posts that have the current module_id as one of their categories.
            Then group them by the *next* category level if it exists.
            {% endcomment %}

            {% assign module_posts = site.categories[module_id] %}

            {% if module_posts.size > 0 %}
            <div class="list-group shadow-sm">
                {% for post in module_posts reversed %}
                {% if post.categories contains course_id %}
                <a href="{{ site.baseurl }}{{ post.url }}"
                    class="list-group-item list-group-item-action d-flex justify-content-between align-items-center py-3">
                    <div>
                        <h5 class="mb-1 text-primary">{{ post.title }}</h5>
                        {% if post.description %}
                        <p class="mb-0 text-muted small">{{ post.description }}</p>
                        {% endif %}
                        {% if post.categories.size > 3 %}
                        <span class="badge badge-light border text-muted px-2 py-1 mt-1">{{ post.categories[3] |
                            capitalize }}</span>
                        {% endif %}
                    </div>
                    <i class="fa fa-chevron-right text-muted small"></i>
                </a>
                {% endif %}
                {% endfor %}
            </div>
            {% else %}
            <div class="alert alert-info">
                Stay tuned! Content for this module is coming soon.
            </div>
            {% endif %}

            <div class="mt-5 pt-4 border-top">
                <a href="{{ site.baseurl }}/courses/{{ course_id }}/" class="btn btn-primary text-white">
                    <i class="fa fa-arrow-left mr-2"></i> Back to {{ active_course.title }}
                </a>
            </div>
            {% else %}
            <div class="text-center py-5">
                <h1 class="display-4 text-muted">404</h1>
                <h2 class="h4">Page not found</h2>
                <p class="lead">This content is not yet available. Please check back later!</p>
                <a href="{{ site.baseurl }}/" class="btn btn-primary mt-3">Return Home</a>
            </div>
            {% endif %}
        </div>
    </div>
</div>